<!DOCTYPE html>
<html>
<head>
<meta charset="utf8" />
<title>Создание директорий по списку файлов</title>
</head>
<body>

<table><tr><td style="vertical-align:top;">
<h1>Создание директорий по списку файлов</h1>
</td><td style="vertical-align:top;">
<a href="distdir-recipe.htm">Описание рецепта distdir</a>,
<a href="index.htm">Как собирать monodevelop</a>
<br />
&nbsp;
</td></tr></table>

Почему-то не работает регулярное выражение, которое должно убирать имена файлов, чтобы оставались только директории.
<br />
<br />
Для того, чтобы оно заработало нужно:
<br />
1) сохранить реальный список имён файлов в файл, так как словарь, который ранее использовался как модель не содержит директорий
<br />
2) считать реальный список в тестовом примере
<br />
3) сделать копию тестируемого фрагмента makefile
<br />
4) выяснить, что именно происходит в момент замены
<br />
 (зачем делать отдельный тестовый мейкфайл, если этот неясно как выполняемый пункт
<br />
 можно неясно как выполнить и на основном мейкфайле?
<br />
 затем, что отдельный тест быстрее модифицировать, не надо прогонять два скрипта каждый раз
<br />
 плюс - останется как документация)
<br />
<br />
Нужно вообще переписать этот фрагмент Makefile, потому что
<br />
сейчас sort из состава bash сортирует только отдельные фрагменты,
<br />
а не весь список директорий
<br />
<br />
Для того, чтобы сохранить переменную в файл следует:
<br />
1) вывести её при помощи $(info $$var=[$var])
<br />
2) перенаправить вывод в файл make >file.txt 2>&1
<br />
3) текстовым редактором скопировать нужное в отдельный файл или удалить ненужное из существующего
<br />
<br />
Считать переменную из файла var:=$(shell cat file.txt)

</body>
</html>

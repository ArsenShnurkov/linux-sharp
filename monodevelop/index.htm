<!DOCTYPE html>
<html>
<head>
<meta charset="utf8" />
<title>Как собирать monodevelop</title>
</head>
<body>

<table><tr><td style="vertical-align:top;">
<h1>Как собирать monodevelop</h1>
</td><td style="vertical-align:top;">
<a href="../index.htm">Разработка на C# под linux</a>
<br />
&nbsp;
</td></tr></table>

<h2>Почему надо собирать более свежую версию monodevelop?</h2>
Например не поддерживаются новые форматы проектов VisualStudio:
<br />
<img src="Core-AnalyzerDriver.png" alt="Core-AnalyzerDriver.png" />

<h2>Как работает .ebuild</h2>
<a href="https://raw.githubusercontent.com/gentoo/dotnet/master/dev-util/monodevelop/monodevelop-5.9.5.9-r1.ebuild">https://raw.githubusercontent.com/gentoo/dotnet/master/dev-util/monodevelop/monodevelop-5.9.5.9-r1.ebuild</a>
<br />
<br />
1) загружаются пакеты и архив исходников с github (через SRC_URI)
<br />
2) пакеты распаковываются, .submodues восстанавливаются
<br />
3) создаётся новый архив с исходниками
<br />
4) архив распаковывается и собирается
<br />
(а попроще никак нельзя?)
<br />
5) src_compile - используется по-умолчанию (make)
<br />
6) src_install - используется по-умолчанию (make install)
<br />
<br />
SRC_URI=
<br />
загружает NuGet-пакеты (архивы), переименовывая их в zip-файлы.
<br />
В какую директорию попадают скачанные архивы? (в одну из директорий в /tmp/portage где происходит сборка текущего билда)
<br />
(выполни src_unpack да поищи файлы на диске.)
<br />
В какую директорию они распаковываются?
<br />
можно было бы написать для этого же ебилды с постфиксом "-bin"
<br />
Если написать билды для установки бинарных пакетов, то в какую директорию они должны устанавливаться?
<br />
пакеты распаковываются при помощи "unzip " в директорию "${T}"/packages
<br />
в чем заключается установка nuget-пакетов помимо копирования?
<br />
если кроме копирования происходит распаковка, то в какую директорию пакеты распаковываются?
<br />
<br />
Как работает make dist?
<br />
Как работает make?
<br />
как используются их хитрые списки файлов, ссылающиеся на ../../referencesources ?

<br />
<br />
Надо бы нарисовать картинку - полный список зависимостей, что надо иметь собранным, чтобы не использовать submodules и бинарные пакеты...

<h2>Сборка Monodevelop</h2>
Сначала из ветки репозитория получают тарболл:
<br />
<object data="../build1.svg" type="image/svg+xml">image</object>
<br />
<br />
<span style="color:red">поискать, на какой машине/сервисе сборки</span>
<br />
<br />
Можно сделать свою машину, на которой исходные тексты будут забираться с github и будет создаваться тарбол, но не факт, что это решит проблемы.
<br />
А какие проблемы у нас есть?
<br />
Есть <a href="../gentoo/index.htm">ebuild для Gentoo</a> для сборки Monodevelop 3.0.2 
<br />
текущая версия Monodevelop - 5.7.0
<br />
(то есть не факт, что если просто поменять путь до тарбола, то этого будет достаточно для того, чтобы собрать версию 5.7)
<br />
<font style="color:red">ну ты хотя бы попробуй - какие ошибки возникают?</font>


</body>
</html>

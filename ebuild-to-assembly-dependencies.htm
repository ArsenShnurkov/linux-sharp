<!DOCTYPE html>
<html>
<head>
<meta charset="utf8" />
<title>Отобразить зависимости между .ebuild-файлами в зависимости между .dll assemblies</title>
</head>
<body>

<table><tr><td style="vertical-align:top;">
<h1>Отобразить зависимости между .ebuild-файлами в зависимости между .dll assemblies</h1>
</td><td style="vertical-align:top;">
<a href="index.htm">Разработка на C# под linux</a>
<br />
&nbsp;
</td></tr></table>

В portage главный способ описания зависимостей - это переменная DEPENDS (и RDEPENDS) в файлах .ebuild
<br />
В то же время в mono зависимости прописываются внутри сборок (в манифесте).
<br />
В процессе компиляции зависимости из исходных текстов должны попадать в скомпилированный код (но на текущий момент не попадают)
<br />
<br />
Для того, чтобы зависимости из .ebuild-файлов начали попадать в .dll-файлы нужно уметь выполнять следующие операции:
<br />
1) глядя на переменные DEPEND и USE вычислить, какие слоты и версии каких пакетов потребуются
<br />
2) глядя на категорию, название и слот пакета определить, какую версию .dll он установил
<br />
(для этого приёдется слазить в /var/lib/db, найти там где лежит .pc-файл, в нём найти где лежит .dll и из неё считать версию)
<br />
(как альтернатива - можно проделать аналогичное по исходным текстам, но это вероятно сложнее)
<br />
3) определив, какие версии .dll нужны в качестве зависимостей, нужно вписать их в .csproj-файл, чтобы эти версии попали в assembly (.dll или .exe)
<br />
(это самое простое, если бы библиотеки для работы с Xml были реализованы в mono нормально, а не так как они реализованы сейчас благодаря Microsoft)
<br />
(так что возможно работу с XML и XPath нужно переписать, потом, когда нибудь, если захочется...)
<br />
<br />
Конечно, поиск по имени в GAC выглядит проще (всего-то нужно посмотреть код утилиты gacutil)
<br />
но такое решение не будет учитывать слоты portage

</body>
</html>
